{% extends 'template.html' %}

{% block content %}

<p>Debug</p>
<p>{{debug}}</p>

<div id="mynetwork"></div>

 <script type="text/javascript">


    function readTextFile(file, callback) {
        var rawFile = new XMLHttpRequest();
        rawFile.overrideMimeType("application/json");
        rawFile.open("GET", file, true);
        rawFile.onreadystatechange = function() {
            if (rawFile.readyState === 4 && rawFile.status == "200") {
                callback(rawFile.responseText);
            }
        }
        rawFile.send(null);
    }

    readTextFile("{{url_for('static', filename='js/nodes.json')}}", function(text){
        var data = JSON.parse(text);
        console.log(data)

        var nodes = data.nodes;
        var edges = data.edges;

        var container = document.getElementById('mynetwork');

        var data = {
            nodes: nodes,
            edges: edges
        };
        var options = {physics: {enabled: true}};

        var network = new vis.Network(container, data, options);

    });

{% endblock %}
